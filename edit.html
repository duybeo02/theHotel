<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quáº£n LÃ½ KhÃ¡ch Sáº¡n</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/edit.css">
</head>
<body>
    <div class="container mt-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="text-center">Quáº£n LÃ½ KhÃ¡ch Sáº¡n</h2>
            <button class="btn btn-secondary" onclick="goBack()">ðŸ”™ Quay láº¡i trang chá»§</button>
        </div>

        <!-- Form nháº­p khÃ¡ch sáº¡n -->
        <form id="hotelForm" class="row g-3">
            <div class="col-md-3">
                <input type="text" id="hotelName" class="form-control" placeholder="TÃªn khÃ¡ch sáº¡n" required>
            </div>
            <div class="col-md-2">
                <input type="number" id="hotelPrice" class="form-control" placeholder="GiÃ¡" required>
            </div>
            <div class="col-md-2">
                <input type="number" id="hotelQuantity" class="form-control" placeholder="Sá»‘ lÆ°á»£ng phÃ²ng" required>
            </div>
            <div class="col-md-3">
                <input type="file" id="hotelImage" class="form-control" accept="image/*" required>
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-success w-100">ThÃªm khÃ¡ch sáº¡n</button>
            </div>
        </form>

        <!-- Danh sÃ¡ch khÃ¡ch sáº¡n -->
        <table class="table table-bordered mt-4">
            <thead class="table-dark text-center">
                <tr>
                    <th>STT</th>
                    <th>áº¢nh</th>
                    <th>TÃªn khÃ¡ch sáº¡n</th>
                    <th>GiÃ¡</th>
                    <th>Sá»‘ lÆ°á»£ng</th>
                    <th>HÃ nh Ä‘á»™ng</th>
                </tr>
            </thead>
            <tbody id="hotelList" class="text-center"></tbody>
        </table>
    </div>

    <script>
        function goBack() {
            window.location.href = "index.html"; 
        }
    </script>
    <script src="script.js"></script>
</body>
<script>
    document.addEventListener("DOMContentLoaded", function () {
    let hotels = JSON.parse(localStorage.getItem("hotels")) || [];
    const hotelForm = document.getElementById("hotelForm");
    const hotelList = document.getElementById("hotelList");

    function renderHotels() {
        hotelList.innerHTML = "";
        hotels.forEach((hotel, index) => {
            hotelList.innerHTML += `
                <tr>
                    <td>${index + 1}</td>
                    <td><img src="${hotel.image}" class="img-fluid"></td>
                    <td>${hotel.name}</td>
                    <td>${hotel.price} VND</td>
                    <td>${hotel.quantity}</td>
                    <td>
                        <button class="btn btn-sm btn-edit" onclick="editHotel(${index})">Sá»­a</button>
                        <button class="btn btn-sm btn-delete" onclick="deleteHotel(${index})">XÃ³a</button>
                    </td>
                </tr>
            `;
        });
    }

    hotelForm.addEventListener("submit", function (event) {
        event.preventDefault();
        const name = document.getElementById("hotelName").value;
        const price = document.getElementById("hotelPrice").value;
        const quantity = document.getElementById("hotelQuantity").value;
        const imageInput = document.getElementById("hotelImage");
        const image = imageInput.files[0];

        if (image) {
            const reader = new FileReader();
            reader.onload = function (e) {
                hotels.push({ name, price, quantity, image: e.target.result });
                localStorage.setItem("hotels", JSON.stringify(hotels));
                renderHotels();
                hotelForm.reset();
            };
            reader.readAsDataURL(image);
        }
    });

    window.deleteHotel = function (index) {
        hotels.splice(index, 1);
        localStorage.setItem("hotels", JSON.stringify(hotels));
        renderHotels();
    };

    window.editHotel = function (index) {
        const newName = prompt("Nháº­p tÃªn má»›i:", hotels[index].name);
        const newPrice = prompt("Nháº­p giÃ¡ má»›i:", hotels[index].price);
        const newQuantity = prompt("Nháº­p sá»‘ lÆ°á»£ng má»›i:", hotels[index].quantity);

        if (newName && newPrice && newQuantity) {
            hotels[index].name = newName;
            hotels[index].price = newPrice;
            hotels[index].quantity = newQuantity;
            localStorage.setItem("hotels", JSON.stringify(hotels));
            renderHotels();
        }
    };

    renderHotels();
});

</script>
</html>
